{"version":3,"sources":["web/views/game/GameNavbar.tsx","web/views/game/GameLoading.tsx","blockchain/Web3Utils.tsx","blockchain/Lina.tsx","utils/NumberUtils.tsx","blockchain/definition/data/Territory.tsx","blockchain/definition/data/NokaiPos.tsx","game/BlackHole.tsx","web/views/game/data/Point.tsx","web/views/game/data/Position.tsx","web/views/game/BoardCase.tsx","blockchain/definition/data/NokaiProfile.tsx","utils/MathUtils.tsx","web/views/game/GameBoard.tsx","blockchain/ContractLoader.tsx","game/Nokai.tsx","utils/HttpUtils.tsx","utils/NftStorage.tsx","game/NokaiStats.tsx","web/views/game/store/NokaiStore.tsx","web/views/game/NokaiInventory.tsx","web/views/GameView.tsx","web/views/home/HomeLoading.tsx","web/views/home/Navbar.tsx","web/views/home/TutorialView.tsx","web/views/HomeView.tsx","web/views/MarketView.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["GameNavbar","props","state","networkId","account","loading","a","this","setState","className","href","target","rel","icon","style","color","Component","GameLoading","Web3Utils","window","ethereum","request","method","accounts","web3","Web3","defaultAccount","on","alert","detectEthereumProvider","provider","console","log","result","length","eth","net","getId","e","value","utils","fromAscii","Lina","data","call","from","send","getDefaultAccount","NumberUtils","BigInt","parseInt","toString","parseTerritory","x","y","uxonium","darkMatter","plasmaEnergy","voidEssence","extractor","level","cost","lastExtract","nokai","owner","discovered","parseNokaiPos","onBoard","BlackHole","contract","methods","maxX","maxY","totalPos","choices","getFor","map","to","getForRange","startPos","endPos","startLine","endLine","getForBox","postX","posY","get","extractorCostAt","user","territoryCount","nokaiId","nokaiPos","nokaiAt","callback","events","SlotDiscovered","search","SlotConquered","NokaiMoved","TerritoryExtracted","ExtractorUpgraded","Point","Position","index","posX","BoardCase","event","onMouseOver","onClick","corners","point","size","spacing","points","calculateCoordinates","join","fill","Number","Rarity","Technique","MathUtils","Canvas","width","height","caseLength","Camera","totalX","totalY","Board","casesX","casesY","total","GameBoard","_handleKeyUp","keyCode","preventDefault","moveCameraY","moveCameraX","_handleKeyDown","canvas","camera","board","positions","boxSelected","boxFocused","boxClicked","bind","boxUnSelect","boxHover","Promise","all","getMaxX","blackhole","getMaxY","then","values","loadDataForCamera","document","addEventListener","removeEventListener","key","undefined","tmp","needQueryData","getTerritoryForBox","territories","forEach","territory","lineCount","pos","max","setX","setY","originX","originY","camX","camY","adjustX","isNotEven2","isNotEven","push","diffX","diffY","pos1","pos2","border","getCameraView","getClassName","allowedDistanceForTarget","d","getPath","ContractLoader","getNetwork","BlackHoleData","networks","Contract","abi","address","NokaiData","Nokai","NokaiStatsData","NokaiStats","baseUri","setUri","lockMint","unlockMint","lockTransfer","unlockTransfer","nbGods","setup","targetId","upgradeChoice","absorb","listFor","tokenURI","NokaiBorn","NokaiUpgraded","HttpUtils","url","success","failure","fetch","response","json","catch","error","NfStorage","parseProfileDTO","stats","hp","attack","defense","regen","pa","gradeValue","grade","technique1","technique2","currentHp","currentPa","dead","burned","lastHpSet","lastPaSet","parseProfile","config","img","profile","nokaiIds","profiles","NokaiDamaged","NokaiKilled","NokaiReborn","NokaiHealed","NokaiEnergized","NokaiEmptyEnergy","NokaiStore","id","subscribers","nokais","Object","keys","subscriber","NokaiInventory","nokaisUpdatedAt","Date","now","ownedNokaiIds","nokaisUpdated","subscribe","loadNokais","prevProps","prevState","snapshot","nokaiStats","batch","update","imageUrl","image","name","list","src","alt","GameView","backToLobby","history","walletConnected","setupState","loadBlockchainData","loadContracts","listenNetworkChanges","listenAccountChanges","loginMetamask","areContractsValid","onInventoryNokaiClick","isMetamaskConnected","loadMetamask","instantiateBlackHole","instantiateNokai","instantiateNokaiStats","getEth","chainId","content","Button","variant","Modal","show","backdrop","keyboard","centered","animation","Header","closeButton","Title","Body","Footer","withRouter","HomeLoading","Navbar","loadData","loadAccountsData","TutorialView","HomeView","launchGame","current","path","MarketView","library","add","faGithub","faLinkedinIn","App","role","basename","process","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.344bafc5.chunk.js","sourcesContent":["import {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {Component} from \"react\";\n\ntype GameNavbarProperties = {\n    networkId: bigint,\n    account: string,\n}\n\ntype GameNavbarState = {\n    networkId: bigint,\n    account: string,\n    loading: boolean\n}\n\nexport default class GameNavbar extends Component<GameNavbarProperties, GameNavbarState> {\n    constructor(props: GameNavbarProperties) {\n        super(props)\n        this.state = {\n            networkId: props.networkId,\n            account: props.account,\n            loading: true\n        }\n    }\n\n    async componentDidMount() {\n        this.setState({loading: false})\n    }\n\n    render() {\n        return <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n            <a\n                className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\n                href=\"https://github.com/Draym/blackhole\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n            >\n                <span><FontAwesomeIcon icon={['fab', \"github\"]}/> BlackHole Game</span>\n            </a>\n            <span style={{color: 'white'}}>network: {this.state.networkId}</span>\n            <span className=\"me-3\" style={{color: 'white'}}>account: {this.state.account}</span>\n        </nav>\n    }\n}","import {Component} from \"react\";\n\ntype GameLoadingProperties = {}\n\ntype GameLoadingState = {}\n\nexport default class GameLoading extends Component<GameLoadingProperties, GameLoadingState> {\n\n    render() {\n        return <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n    }\n}","import Web3 from 'web3'\nimport detectEthereumProvider from '@metamask/detect-provider';\n\ndeclare let window: any;\n\nexport default class Web3Utils {\n\n    static async loadMetamask() {\n        if (window.ethereum) {\n            const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\n            window.web3 = new Web3(window.ethereum)\n            window.ethereum.defaultAccount = accounts[0]\n            window.ethereum.on('accountsChanged', (accounts: string[]) => {\n                window.ethereum.defaultAccount = accounts[0]\n            })\n            return true\n        }\n        // else if (window.web3) {\n        //     window.web3 = new Web3(window.web3.currentProvider)\n        //     return true\n        // }\n        else {\n            window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n            return false\n        }\n    }\n\n    static async isMetamaskInstalled() {\n        const provider = await detectEthereumProvider();\n        return !!provider;\n    }\n\n    static async isMetamaskConnected() {\n        const provider = await detectEthereumProvider()\n\n        if (provider) {\n            console.log('Metamask successfully detected!');\n            const result = await window.ethereum.request({method: 'eth_accounts'})\n            return result.length > 0\n        } else {\n            console.log('Metamask is not installed!');\n            return false\n        }\n    }\n\n    // @ts-ignore\n    static getEth(): EthereumProvider | null {\n        return window.ethereum\n    }\n\n    static async getNetwork(): Promise<bigint> {\n        console.log(\"get network\")\n        return window.web3.eth.net.getId()\n    }\n\n    static async getAccounts(): Promise<string[]> {\n        return await window.ethereum.request({method: 'eth_accounts'})\n    }\n\n    static getDefaultAccount(): string | null {\n        try {\n            return window.ethereum.defaultAccount\n        } catch (e) {\n            return null\n        }\n    }\n\n    static encode(value: string): string {\n        return window.web3.utils.fromAscii(value)\n    }\n\n    static nullAddress() {\n        return '0x0000000000000000000000000000000000000000';\n    }\n\n    static nullBytes() {\n        return '0x0000000000000000000000000000000000000000000000000000000000000000';\n    }\n}","import Web3Utils from \"./Web3Utils\";\n\nexport default class Lina {\n\n    static async call(method: any, data: object = {}) {\n        return method.call({from: Lina.account(), ...data})\n    }\n\n    static async send(method: any, data: object = {}) {\n        return method.send({from: Lina.account(), ...data})\n    }\n\n    static account() {\n        return Web3Utils.getDefaultAccount()\n    }\n}","export default class NumberUtils {\n    static from(value: any): bigint {\n        return BigInt(parseInt(value.toString()))\n    }\n}","import {Extractor} from \"./Extractor\";\nimport NumberUtils from \"../../../utils/NumberUtils\";\n\nexport interface Territory {\n    x: bigint,\n    y: bigint,\n    uxonium: bigint,\n    darkMatter: bigint,\n    plasmaEnergy: bigint,\n    voidEssence: bigint,\n    extractor: Extractor,\n    nokai: bigint,\n    owner: string,\n    discovered: boolean\n}\n\nexport function parseTerritory(data: any): Territory {\n    return {\n        x: NumberUtils.from(data.x),\n        y: NumberUtils.from(data.y),\n        uxonium: NumberUtils.from(data.uxonium),\n        darkMatter: NumberUtils.from(data.darkMatter),\n        plasmaEnergy: NumberUtils.from(data.plasmaEnergy),\n        voidEssence: NumberUtils.from(data.voidEssence),\n        extractor: {\n            level: NumberUtils.from(data.extractor.level),\n            cost: NumberUtils.from(data.extractor.cost),\n            lastExtract: NumberUtils.from(data.extractor.lastExtract),\n        },\n        nokai: NumberUtils.from(data.nokai),\n        owner: data.owner,\n        discovered: data.discovered\n    }\n}","import NumberUtils from \"../../../utils/NumberUtils\";\n\nexport interface NokaiPos {\n    onBoard: boolean,\n    x: bigint,\n    y: bigint\n}\n\nexport function parseNokaiPos(data: any): NokaiPos {\n    return {\n        onBoard: data.onBoard,\n        x: NumberUtils.from(data.x),\n        y: NumberUtils.from(data.y)\n    }\n}","import Lina from \"../blockchain/Lina\";\nimport {parseTerritory, Territory} from \"../blockchain/definition/data/Territory\";\nimport {\n    BlackHoleContract,\n    ExtractorUpgraded,\n    NokaiMoved,\n    NokaiMovedSearch,\n    SlotConquered,\n    SlotConqueredSearch,\n    SlotDiscovered,\n    TerritoryExtracted\n} from \"../blockchain/definition/BlackHoleContract\";\nimport {Address, NokaiId} from \"../blockchain/definition/types\";\nimport {NokaiPos, parseNokaiPos} from \"../blockchain/definition/data/NokaiPos\";\nimport NumberUtils from \"../utils/NumberUtils\";\n\nexport default class BlackHole {\n\n    static async getMaxX(contract: BlackHoleContract): Promise<bigint> {\n        return NumberUtils.from(await Lina.call(contract.methods.maxX()))\n    }\n\n    static async getMaxY(contract: BlackHoleContract): Promise<bigint> {\n        return NumberUtils.from(await Lina.call(contract.methods.maxY()))\n    }\n\n    static async getTotalPos(contract: BlackHoleContract): Promise<bigint> {\n        return NumberUtils.from(await Lina.call(contract.methods.totalPos()))\n    }\n\n    static async getTerritoryFor(contract: BlackHoleContract, choices: bigint[]): Promise<Territory[]> {\n        const data = await Lina.call(contract.methods.getFor(choices))\n\n        return data.map((result: any) => {\n            return parseTerritory(result)\n        })\n    }\n    static async getTerritoryForRange(contract: BlackHoleContract, from: bigint, to: bigint): Promise<Territory[]> {\n        const data = await Lina.call(contract.methods.getForRange(from, to))\n\n        return data.map((result: any) => {\n            return parseTerritory(result)\n        })\n    }\n\n    static async getTerritoryForBox(contract: BlackHoleContract, startPos: bigint, endPos: bigint, startLine: bigint, endLine: bigint): Promise<Territory[]> {\n        const data = await Lina.call(contract.methods.getForBox(startPos, endPos, startLine, endLine))\n\n        return data.map((result: any) => {\n            return parseTerritory(result)\n        })\n    }\n\n\n    static async getTerritory(contract: BlackHoleContract, postX: bigint, posY: bigint): Promise<Territory> {\n        return parseTerritory(await Lina.call(contract.methods.get(postX, posY)))\n    }\n\n    static async getExtractorCostAt(contract: BlackHoleContract, postX: bigint, posY: bigint): Promise<bigint> {\n        return NumberUtils.from(await Lina.call(contract.methods.extractorCostAt(postX, posY)))\n    }\n\n    static async countTerritoryFor(contract: BlackHoleContract, user: Address): Promise<bigint> {\n        return NumberUtils.from(await Lina.call(contract.methods.territoryCount(user)))\n    }\n\n    static async getNokaiPos(contract: BlackHoleContract, nokaiId: NokaiId): Promise<NokaiPos> {\n        return parseNokaiPos(await Lina.call(contract.methods.nokaiPos(nokaiId)))\n    }\n\n    static async getNokaiAt(contract: BlackHoleContract, postX: bigint, posY: bigint): Promise<NokaiId> {\n        return NumberUtils.from(await Lina.call(contract.methods.nokaiAt(postX, posY)))\n    }\n\n    static subscribeSlotDiscovered(contract: BlackHoleContract, callback: (data: SlotDiscovered) => any) {\n        contract.events.SlotDiscovered().on('data', callback)\n    }\n\n    static subscribeSlotConquered(contract: BlackHoleContract, search: SlotConqueredSearch, callback: (data: SlotConquered) => any) {\n        contract.events.SlotConquered(search).on('data', callback)\n    }\n\n    static subscribeNokaiMoved(contract: BlackHoleContract, search: NokaiMovedSearch, callback: (data: NokaiMoved) => any) {\n        contract.events.NokaiMoved(search).on('data', callback)\n    }\n\n    static subscribeTerritoryExtracted(contract: BlackHoleContract, callback: (data: TerritoryExtracted) => any) {\n        contract.events.TerritoryExtracted().on('data', callback)\n    }\n\n    static subscribeExtractorUpgraded(contract: BlackHoleContract, callback: (data: ExtractorUpgraded) => any) {\n        contract.events.ExtractorUpgraded().on('data', callback)\n    }\n}","export class Point {\n    x: number\n    y: number\n\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n}","export class Position {\n    index: bigint\n    x: bigint\n    y: bigint\n    posX: number\n    posY: number\n\n    constructor(index: bigint, x: bigint, y: bigint, posX: number, posY: number) {\n        this.index = index\n        this.x = x\n        this.y = y\n        this.posX = posX\n        this.posY = posY\n    }\n\n}","import {Component} from \"react\";\nimport {Point} from \"./data/Point\";\nimport {Territory} from \"../../../blockchain/definition/data/Territory\";\nimport {Position} from \"./data/Position\";\n\ntype TerritoryProperties = {\n    className: string,\n    x: bigint,\n    y: bigint,\n    posX: number,\n    posY: number,\n    size: number,\n    index: bigint,\n    territory: Territory,\n    onClick: ((pos: Position) => void) | null,\n    onMouseOver: ((pos: Position) => void) | null,\n}\n\ntype TerritoryState = {\n    loading: boolean,\n}\n\nexport default class BoardCase extends Component<TerritoryProperties, TerritoryState> {\n\n    static readonly spacing: number = 30\n    static readonly corners: Point[] = [\n        new Point(50, 0),\n        new Point(100, BoardCase.spacing),\n        new Point(100, 100 - BoardCase.spacing),\n        new Point(50, 100),\n        new Point(0, 100 - BoardCase.spacing),\n        new Point(0, BoardCase.spacing),\n    ]\n\n    constructor(props: TerritoryProperties) {\n        super(props)\n        this.state = {\n            loading: true,\n        }\n    }\n\n    componentDidMount() {\n        this.setState({loading: false})\n    }\n\n    onMouseOver(event: any) {\n        if (this.props.onMouseOver) {\n            this.props.onMouseOver(new Position(this.props.index, this.props.x, this.props.y, this.props.posX, this.props.posY));\n        }\n    }\n\n\n    onClick(event: any) {\n        if (this.props.onClick) {\n            this.props.onClick(new Position(this.props.index, this.props.x, this.props.y, this.props.posX, this.props.posY));\n        }\n    }\n\n    calculateCoordinates(): Point[] {\n        return BoardCase.corners.map(point => {\n            return new Point(\n                (point.x * this.props.size / 100) + (this.props.posX * this.props.size),\n                (point.y * this.props.size / 100) + (this.props.posY * this.props.size) - (BoardCase.spacing * this.props.posY)\n            )\n        })\n    }\n\n    render() {\n        const points = this.calculateCoordinates().map(point => `${point.x},${point.y}`).join(\" \")\n        return <g className={'hexagon-group ' + this.props.className}\n                  onMouseOver={e => this.onMouseOver(e)}\n                  onClick={e => this.onClick(e)}>\n            <g className=\"hexagon\">\n                <text x={this.props.posX * this.props.size + 24} y={(this.props.posY * this.props.size) - (BoardCase.spacing * this.props.posY) + 55}\n                      fill=\"black\">{Number(this.props.x)}_{Number(this.props.y)}</text>\n                <polygon points={points}/>\n            </g>\n        </g>\n    }\n}","import NumberUtils from \"../../../utils/NumberUtils\";\nimport {NokaiId} from \"../types\";\n\nenum Rarity {\n    Spirit,\n    Champion,\n    Overlord,\n    Astral,\n    Legend,\n    God\n}\n\nenum Technique {\n    SPECIALIST, // hit twice at 75%\n    GUARDIAN, // block 40% dmg after defense\n    GLUTTON, // steal 30% opponent's attack stat\n    BUFFOON, // reduce opponent's attack and defence by 20%\n    DESTROYER, // break 50% opponent's defense\n    FOOL, // cancel opponent's passives\n    DEADLY, // critical hit - deal +40% dmg\n    AUTHORITY, // survive with 1hp if killed by lower class Nokai\n    REVENGER, // hit twice at 100% on death\n    MIMIC // copy opponent technique\n}\n\nexport interface Stats {\n    hp: bigint,\n    attack: bigint,\n    defense: bigint,\n    regen: bigint,\n    pa: bigint,\n    gradeValue: bigint,\n    grade: Rarity,\n    technique1: Technique,\n    technique2: Technique\n}\n\nexport interface Profile {\n    stats: Stats,\n    currentHp: bigint,\n    currentPa: bigint,\n    dead: boolean,\n    burned: boolean,\n    lastHpSet: bigint,\n    lastPaSet: bigint\n}\n\nexport interface ProfileDTO {\n    nokaiId: NokaiId,\n    stats: Stats,\n    currentHp: bigint,\n    currentPa: bigint,\n    dead: boolean,\n    burned: boolean,\n    lastHpSet: bigint,\n    lastPaSet: bigint\n}\n\nexport function parseProfileDTO(data: any): ProfileDTO {\n    return {\n        nokaiId: data.nokaiId,\n        stats: {\n            hp: NumberUtils.from(data.stats.hp),\n            attack: NumberUtils.from(data.stats.attack),\n            defense: NumberUtils.from(data.stats.defense),\n            regen: NumberUtils.from(data.stats.regen),\n            pa: NumberUtils.from(data.stats.pa),\n            gradeValue: NumberUtils.from(data.stats.gradeValue),\n            grade: data.stats.grade,\n            technique1: data.stats.technique1,\n            technique2: data.stats.technique2,\n        },\n        currentHp: NumberUtils.from(data.currentHp),\n        currentPa: NumberUtils.from(data.currentPa),\n        dead: data.dead,\n        burned: data.burned,\n        lastHpSet: NumberUtils.from(data.lastHpSet),\n        lastPaSet:  NumberUtils.from(data.lastPaSet),\n    }\n}\n\nexport function parseProfile(data: any): Profile {\n    return {\n        stats: {\n            hp: NumberUtils.from(data.stats.hp),\n            attack: NumberUtils.from(data.stats.attack),\n            defense: NumberUtils.from(data.stats.defense),\n            regen: NumberUtils.from(data.stats.regen),\n            pa: NumberUtils.from(data.stats.pa),\n            gradeValue: NumberUtils.from(data.stats.gradeValue),\n            grade: data.stats.grade,\n            technique1: data.stats.technique1,\n            technique2: data.stats.technique2,\n        },\n        currentHp: NumberUtils.from(data.currentHp),\n        currentPa: NumberUtils.from(data.currentPa),\n        dead: data.dead,\n        burned: data.burned,\n        lastHpSet: NumberUtils.from(data.lastHpSet),\n        lastPaSet:  NumberUtils.from(data.lastPaSet),\n    }\n}","export default class MathUtils {\n    static isEven(value: bigint): boolean {\n        return value % BigInt(2) === BigInt(0)\n    }\n    static isEven2(value: number): boolean {\n        return value % 2 === 0\n    }\n\n    static isNotEven(value: bigint): boolean {\n        return value % BigInt(2) !== BigInt(0)\n    }\n    static isNotEven2(value: number): boolean {\n        return value % 2 !== 0\n    }\n}","import {Component} from \"react\";\nimport BlackHole from \"../../../game/BlackHole\";\nimport {BlackHoleContract} from \"../../../blockchain/definition/BlackHoleContract\";\nimport BoardCase from \"./BoardCase\";\nimport {Territory} from \"../../../blockchain/definition/data/Territory\";\nimport MathUtils from \"../../../utils/MathUtils\";\nimport {Position} from \"./data/Position\";\n\nclass Canvas {\n    width: number = 1400\n    height: number = 750\n    caseLength: bigint = BigInt(100)\n}\n\nclass Camera {\n    x: bigint\n    y: bigint\n    totalX: bigint\n    totalY: bigint\n\n    constructor(x: bigint, y: bigint, totalX: bigint, totalY: bigint) {\n        this.x = x;\n        this.y = y;\n        this.totalX = totalX;\n        this.totalY = totalY;\n    }\n\n    setX(x: bigint): Camera {\n        this.x = x;\n        return this\n    }\n\n    setY(y: bigint): Camera {\n        this.y = y;\n        return this\n    }\n}\n\nclass Board {\n    casesX: bigint\n    casesY: bigint\n    total: bigint\n\n    constructor(x: bigint, y: bigint) {\n        this.casesX = x;\n        this.casesY = y;\n        this.total = x * y\n    }\n}\n\ntype CameraPos = {\n    key: number,\n    x: bigint,\n    y: bigint,\n    posX: number,\n    posY: number,\n    territory: Territory\n}\ntype GameBoardProperties = {\n    blackhole: BlackHoleContract\n}\n\ntype GameBoardState = {\n    loading: boolean,\n    canvas: Canvas,\n    camera: Camera,\n    board: Board,\n    boxSelected: Position | null,\n    boxFocused: Position | null,\n    positions: { [key: number]: Territory }\n}\n\nexport default class GameBoard extends Component<GameBoardProperties, GameBoardState> {\n\n    constructor(props: GameBoardProperties) {\n        super(props)\n        this.state = {\n            loading: true,\n            canvas: new Canvas(),\n            camera: new Camera(BigInt(0), BigInt(0), BigInt(14), BigInt(11)),\n            board: new Board(BigInt(0), BigInt(0)),\n            positions: {},\n            boxSelected: null,\n            boxFocused: null\n        }\n        this.boxClicked = this.boxClicked.bind(this)\n        this.boxUnSelect = this.boxUnSelect.bind(this)\n        this.boxHover = this.boxHover.bind(this)\n    }\n\n    async componentDidMount() {\n        Promise.all([\n            BlackHole.getMaxX(this.props.blackhole),\n            BlackHole.getMaxY(this.props.blackhole)\n        ]).then((values) => {\n            this.setState({board: new Board(values[0], values[1])})\n\n            this.loadDataForCamera(BigInt(0), this.state.camera.totalX + BigInt(1), BigInt(0), this.state.camera.totalY + BigInt(1)).then(() => {\n                this.setState({loading: false})\n            })\n        });\n\n        document.addEventListener(\"keydown\", this._handleKeyDown)\n        document.addEventListener(\"keyup\", this._handleKeyUp)\n    }\n\n    componentWillUnmount() {\n        document.addEventListener(\"keydown\", this._handleKeyDown)\n        document.removeEventListener(\"keyup\", this._handleKeyUp)\n    }\n\n    needQueryData(startPos: bigint, endPos: bigint, startLine: bigint, endLine: bigint): boolean {\n        for (let y = startLine; y < endLine; y++) {\n            for (let x = startPos; x < endPos; x++) {\n                const key: number = Number(y * this.state.board.casesX + x)\n                if (this.state.positions[key] === undefined) {\n                    return true;\n                }\n            }\n        }\n        return false\n    }\n\n    async loadDataForCamera(startPos: bigint, endPos: bigint, startLine: bigint, endLine: bigint) {\n        if (startPos > endPos) {\n            let tmp = startPos\n            startPos = endPos\n            endPos = tmp\n        }\n        if (startLine > endLine) {\n            let tmp = startLine\n            startLine = endLine\n            endLine = tmp\n        }\n        startPos = startPos >= BigInt(0) ? startPos : BigInt(0)\n        startLine = startPos >= BigInt(0) ? startLine : BigInt(0)\n        endPos = endPos < this.state.board.casesX ? endPos : this.state.board.casesX\n        endLine = endLine < this.state.board.casesY ? endLine : this.state.board.casesY\n        if (!this.needQueryData(startPos, endPos, startLine, endLine))\n            return\n        console.log(\"LOAD QUERY:\", startPos, endPos, startLine, endLine)\n        BlackHole.getTerritoryForBox(this.props.blackhole, startPos, endPos, startLine, endLine).then(territories => {\n            let positions: { [key: number]: Territory } = {}\n            territories.forEach((territory, index) => {\n                const lineCount = endPos - startPos\n                const lineIndex: bigint = (BigInt(index) / lineCount) + startLine\n                const origin: bigint = (lineIndex * this.state.board.casesX) + startPos\n                const pos: bigint = origin + (BigInt(index) % lineCount)\n                positions[Number(pos)] = territory\n            })\n            //console.log(\"response:\", positions)\n            console.log(\"BOARD:\", {...this.state.positions, ...positions})\n            this.setState({positions: {...this.state.positions, ...positions}})\n        })\n    }\n\n    moveCameraX(value: number) {\n        let max = this.state.board.casesX - this.state.camera.totalX > BigInt(0) ? this.state.board.casesX - this.state.camera.totalX : BigInt(0)\n        let posX: bigint = this.state.camera.x + BigInt(value)\n        if (posX < 0) {\n            posX = BigInt(0)\n        }\n        if (posX > max) {\n            posX = max\n        }\n        this.setState({camera: this.state.camera.setX(posX)})\n        if (posX + this.state.camera.totalX + BigInt(value) < max) {\n            this.loadDataForCamera(posX + this.state.camera.totalX, posX + this.state.camera.totalX + BigInt(value), this.state.camera.y, this.state.camera.y + this.state.camera.totalY)\n        }\n    }\n\n    moveCameraY(value: number) {\n        let max = this.state.board.casesY - this.state.camera.totalY > BigInt(0) ? this.state.board.casesY - this.state.camera.totalY : BigInt(0)\n        let posY: bigint = this.state.camera.y + BigInt(value)\n        if (posY < 0) {\n            posY = BigInt(0)\n        }\n        if (posY > max) {\n            posY = max\n        }\n        this.setState({camera: this.state.camera.setY(posY)})\n        if (posY + this.state.camera.totalY + BigInt(value) < max) {\n            this.loadDataForCamera(this.state.camera.x, this.state.camera.x + this.state.camera.totalX, posY + this.state.camera.totalY, posY + this.state.camera.totalY + BigInt(value))\n        }\n    }\n\n    _handleKeyUp = (event: { keyCode: number, preventDefault: any }) => {\n        switch (event.keyCode) {\n            case 40: // BOTTOM\n                event.preventDefault()\n                this.moveCameraY(1)\n                break\n            case 39: // RIGHT\n                event.preventDefault()\n                this.moveCameraX(1)\n                break\n            case 38: // TOP\n                event.preventDefault()\n                this.moveCameraY(-1)\n                break\n            case 37: // LEFT\n                event.preventDefault()\n                this.moveCameraX(-1)\n                break\n            default:\n                break\n        }\n    }\n\n    _handleKeyDown = (event: { keyCode: number, preventDefault: any }) => {\n        switch (event.keyCode) {\n            case 40: // BOTTOM\n                event.preventDefault()\n                break\n            case 39: // RIGHT\n                event.preventDefault()\n                break\n            case 38: // TOP\n                event.preventDefault()\n                break\n            case 37: // LEFT\n                event.preventDefault()\n                break\n            default:\n                break\n        }\n    }\n\n    private getCameraView(): CameraPos[] {\n        const result: CameraPos[] = []\n        const originX = this.state.camera.x === BigInt(0)\n        const originY = this.state.camera.y === BigInt(0)\n\n        const camX = originX ? this.state.camera.x : this.state.camera.x - BigInt(1)\n        const camY = originY ? this.state.camera.y : this.state.camera.y - BigInt(1)\n        let maxX = camX + this.state.camera.totalX + BigInt(1)\n        let maxY = camY + this.state.camera.totalY + BigInt(1)\n\n        maxX = maxX < this.state.board.casesX ? maxX : this.state.board.casesX\n        maxY = maxY < this.state.board.casesY ? maxY : this.state.board.casesY\n\n        for (let y = camY; y < maxY; y++) {\n            for (let x = camX; x < maxX; x++) {\n\n                const key: number = Number(y * this.state.board.casesX + x)\n\n                //console.log(`[${key}] (${x}, ${y}): ${this.state.positions[key]}`)\n                if (this.state.positions[key] !== undefined) {\n                    const posY: number = Number(y - camY) - (originY ? 0 : 1)\n                    const posX: number = Number(x - camX) - (originX ? 0 : 1)\n\n                    let adjustX: number = 0\n                    if (MathUtils.isNotEven2(posY) || MathUtils.isNotEven(this.state.camera.y))\n                        adjustX = 0.5\n                    if (MathUtils.isNotEven2(posY) && MathUtils.isNotEven(this.state.camera.y))\n                        adjustX = 0\n\n                    result.push({key: key, territory: this.state.positions[key], posX: posX + adjustX, posY: posY, x: x, y: y,})\n                }\n            }\n        }\n        return result;\n    }\n\n    boxClicked(pos: Position) {\n        if (this.state.boxSelected?.index === pos.index) {\n            this.boxUnSelect()\n        } else {\n            this.setState({boxSelected: pos})\n        }\n    }\n\n    boxUnSelect() {\n        this.setState({boxSelected: null})\n    }\n\n    boxHover(pos: Position) {\n        this.setState({boxFocused: pos})\n    }\n\n    getClassName(index: bigint): string {\n        if (this.state.boxSelected?.index === index) {\n            return \"box-selected\"\n        } else if (this.state.boxFocused?.index === index) {\n            return \"box-foxused\"\n        } else {\n            return \"\"\n        }\n    }\n\n    allowedDistanceForTarget(): boolean {\n        if (this.state.boxSelected !== null && this.state.boxFocused !== null) {\n            let diffX = this.state.boxSelected.posX - this.state.boxFocused.posX\n            let diffY = this.state.boxSelected.posY - this.state.boxFocused.posY\n            return diffX <= 1 && diffX >= -1 && diffY <= 1 && diffY >= -1\n        }\n        return false;\n    }\n\n    getPath(pos1: Position, pos2: Position): string {\n        return `M${(pos1.posX * 100) + 50} ${(pos1.posY * 100) + 50 - (BoardCase.spacing * pos1.posY)} L${(pos2.posX * 100) + 50} ${(pos2.posY * 100) + 50 - (BoardCase.spacing * pos2.posY)}`\n    }\n\n    render() {\n        return <div>\n            <div className=\"row\">\n                <div className=\"col-md-9\">\n                    <h6>Camera [{Number(this.state.camera.x)}, {Number(this.state.camera.y)}] __ Map [{Number(this.state.board.casesX)}, {Number(this.state.board.casesY)}]</h6>\n                </div>\n                <div className=\"col-md-3\">\n                    {this.state.boxFocused != null && <h6>Position [{Number(this.state.boxFocused.x)}, {Number(this.state.boxFocused.y)}]</h6>}\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-md-12\">\n                    <svg width={this.state.canvas.width} height={this.state.canvas.height} style={{border: \"1px solid grey\"}}>\n\n                        {!this.state.loading && this.getCameraView().map((data, index) => {\n                            return <BoardCase key={index} className={this.getClassName(BigInt(data.key))}\n                                              index={BigInt(data.key)} x={data.x} y={data.y} posX={data.posX} posY={data.posY} size={Number(this.state.canvas.caseLength)}\n                                              territory={data.territory}\n                                              onClick={this.boxClicked}\n                                              onMouseOver={this.boxHover}/>\n                        })\n                        }\n\n                        {this.allowedDistanceForTarget() &&\n                        <path d={this.getPath(this.state.boxSelected!!, this.state.boxFocused!!)}/>\n                        }\n                    </svg>\n                </div>\n            </div>\n        </div>\n    }\n}","import BlackHole from './contracts/BlackHole.json';\nimport Nokai from './contracts/Nokai.json';\nimport NokaiStats from './contracts/NokaiStats.json';\nimport Web3Utils from \"./Web3Utils\";\nimport {BlackHoleContract} from \"./definition/BlackHoleContract\";\nimport {NokaiContract} from \"./definition/NokaiContract\";\nimport {NokaiStatsContract} from \"./definition/NokaiStatsContract\";\n\ndeclare let window: any;\n\nexport default class ContractLoader {\n\n    static async instantiateBlackHole(): Promise<BlackHoleContract | null> {\n        const networkId = await Web3Utils.getNetwork()\n        // @ts-ignore\n        const BlackHoleData = BlackHole.networks[networkId]\n        if (BlackHoleData) {\n            return new window.web3.eth.Contract(BlackHole.abi, BlackHoleData.address)\n        } else {\n            window.alert('BlackHole contract not deployed to detected network.')\n            return null\n        }\n    }\n\n    static async instantiateNokai(): Promise<NokaiContract | null> {\n        console.log(\"load blackhole\")\n        const networkId = await Web3Utils.getNetwork()\n        // @ts-ignore\n        const NokaiData = Nokai.networks[networkId]\n        if (NokaiData) {\n            return new window.web3.eth.Contract(Nokai.abi, NokaiData.address)\n        } else {\n            window.alert('Nokai contract not deployed to detected network.')\n            return null\n        }\n    }\n\n    static async instantiateNokaiStats(): Promise<NokaiStatsContract | null> {\n        const networkId = await Web3Utils.getNetwork()\n        // @ts-ignore\n        const NokaiStatsData = NokaiStats.networks[networkId]\n        if (NokaiStatsData) {\n            return new window.web3.eth.Contract(NokaiStats.abi, NokaiStatsData.address)\n        } else {\n            window.alert('NokaiStats contract not deployed to detected network.')\n            return null\n        }\n    }\n\n}","import {NokaiBorn, NokaiBornSearch, NokaiContract, NokaiUpgraded, NokaiUpgradedSearch, StatType} from \"../blockchain/definition/NokaiContract\";\nimport Lina from \"../blockchain/Lina\";\nimport {Address, NokaiId} from \"../blockchain/definition/types\";\n\nexport default class Nokai {\n\n    static async setUri(contract: NokaiContract, baseUri: string) {\n        await Lina.call(contract.methods.setUri(baseUri))\n    }\n\n    static async lockMint(contract: NokaiContract) {\n        await Lina.call(contract.methods.lockMint())\n    }\n\n    static async unlockMint(contract: NokaiContract) {\n        await Lina.call(contract.methods.unlockMint())\n    }\n\n    static async lockTransfer(contract: NokaiContract) {\n        await Lina.call(contract.methods.lockTransfer())\n    }\n\n    static async unlockTransfer(contract: NokaiContract) {\n        await Lina.call(contract.methods.unlockTransfer())\n    }\n\n    static async setup(contract: NokaiContract, nbGods: bigint) {\n        await Lina.call(contract.methods.setup(nbGods))\n    }\n\n    static async absorb(contract: NokaiContract, nokaiId: NokaiId, targetId: NokaiId, upgradeChoice: StatType) {\n        await Lina.call(contract.methods.absorb(nokaiId, targetId, upgradeChoice))\n    }\n\n    static async listFor(contract: NokaiContract, owner: Address): Promise<bigint[]> {\n        return await Lina.call(contract.methods.listFor(owner))\n    }\n\n    static async tokenURI(contract: NokaiContract, nokaiId: NokaiId): Promise<string> {\n        return await Lina.call(contract.methods.tokenURI(nokaiId))\n    }\n\n    static subscribeNokaiBorn(contract: NokaiContract, search: NokaiBornSearch, callback: (data: NokaiBorn) => any) {\n        contract.events.NokaiBorn(search).on('data', callback)\n    }\n\n    static subscribeNokaiUpgraded(contract: NokaiContract, search: NokaiUpgradedSearch, callback: (data: NokaiUpgraded) => any) {\n        contract.events.NokaiUpgraded(search).on('data', callback)\n    }\n}","export default class HttpUtils {\n    static async get<T>(url: string, success: (result: T) => any, failure: ((error: any) => any) | null): Promise<any> {\n        console.log(\"url: \", url);\n        return fetch(url)\n            .then((response) => response.json())\n            .then((result) => {\n                console.log(\"json: \", result)\n                return success(result)\n            })\n            .catch((error) => {\n                if (failure != null) {\n                    failure(error)\n                } else console.log(error)\n            });\n    }\n}","export class NfStorage {\n    public static config = \"https://raw.githubusercontent.com/Draym/NokaiGen/main/config\" //\"https://gateway.pinata.cloud/ipfs/QmScX47Mwr7Hdm7nPrP2N6Abm4eXQLqacKBo3NyDqqf6A3\"\n    public static img = \"https://raw.githubusercontent.com/Draym/NokaiGen/main/result\"//\"https://gateway.pinata.cloud/ipfs/QmVjBKqBGMus2eXCRVAxx8wGP1sbMvveSfJnerao3qDbjn\"\n}","import {\n    NokaiDamaged,\n    NokaiDamagedSearch,\n    NokaiEmptyEnergy,\n    NokaiEmptyEnergySearch,\n    NokaiEnergized,\n    NokaiEnergizedSearch,\n    NokaiHealed,\n    NokaiHealedSearch,\n    NokaiKilled,\n    NokaiKilledSearch,\n    NokaiReborn,\n    NokaiRebornSearch,\n    NokaiStatsContract\n} from \"../blockchain/definition/NokaiStatsContract\";\nimport Lina from \"../blockchain/Lina\";\nimport {NokaiId} from \"../blockchain/definition/types\";\nimport {parseProfile, parseProfileDTO, Profile, ProfileDTO} from \"../blockchain/definition/data/NokaiProfile\";\n\nexport default class NokaiStats {\n\n    static async profile(contract: NokaiStatsContract, nokaiId: NokaiId): Promise<Profile> {\n        return parseProfile(await Lina.call(contract.methods.profile(nokaiId)))\n    }\n\n    static async profiles(contract: NokaiStatsContract, nokaiIds: NokaiId[]): Promise<ProfileDTO[]> {\n        const data = await Lina.call(contract.methods.profiles(nokaiIds))\n        return data.map((result: any) => {\n            return parseProfileDTO(result)\n        })\n    }\n\n    static subscribeNokaiDamaged(contract: NokaiStatsContract, search: NokaiDamagedSearch, callback: (data: NokaiDamaged) => any) {\n        contract.events.NokaiDamaged(search).on('data', callback)\n    }\n\n    static subscribeNokaiKilled(contract: NokaiStatsContract, search: NokaiKilledSearch, callback: (data: NokaiKilled) => any) {\n        contract.events.NokaiKilled(search).on('data', callback)\n    }\n\n    static subscribeNokaiReborn(contract: NokaiStatsContract, search: NokaiRebornSearch, callback: (data: NokaiReborn) => any) {\n        contract.events.NokaiReborn(search).on('data', callback)\n    }\n\n    static subscribeNokaiHealed(contract: NokaiStatsContract, search: NokaiHealedSearch, callback: (data: NokaiHealed) => any) {\n        contract.events.NokaiHealed(search).on('data', callback)\n    }\n\n    static subscribeNokaiEnergized(contract: NokaiStatsContract, search: NokaiEnergizedSearch, callback: (data: NokaiEnergized) => any) {\n        contract.events.NokaiEnergized(search).on('data', callback)\n    }\n\n    static subscribeNokaiEmptyEnergy(contract: NokaiStatsContract, search: NokaiEmptyEnergySearch, callback: (data: NokaiEmptyEnergy) => any) {\n        contract.events.NokaiEmptyEnergy(search).on('data', callback)\n    }\n\n}","import {NokaiData} from \"../data/NokaiData\";\nimport {NokaiId} from \"../../../../blockchain/definition/types\";\n\nexport class NokaiStore {\n    private static nokais: { [key: string]: NokaiData } = {}\n    private static subscribers: { [key: string]: (nokaiIds: NokaiId[]) => any } = {}\n\n    static subscribe(id: string, callback: (nokaiIds: NokaiId[]) => any) {\n        this.subscribers[id] = callback\n    }\n\n    static get(nokaiId: NokaiId): NokaiData {\n        return this.nokais[nokaiId.toString()]\n    }\n\n    static list(nokaiIds: NokaiId[]): NokaiData[] {\n        let nokais: NokaiData[] = []\n        console.log(\"STORE:\", this.nokais)\n        nokaiIds.forEach(nokaiId => {\n            let nokai = this.nokais[nokaiId.toString()]\n            if (nokai !== undefined) {\n                nokais.push(nokai)\n            }\n        })\n        return nokais\n    }\n\n    static mapping(nokaiIds: NokaiId[]): { [key: string]: NokaiData } {\n        let nokais: { [key: string]: NokaiData } = {}\n        nokaiIds.forEach(nokaiId => {\n            let nokai = this.nokais[nokaiId.toString()]\n            if (nokai !== undefined) {\n                nokais[nokaiId.toString()] = nokai\n            }\n        })\n        return nokais\n    }\n\n    static update(nokaiId: NokaiId, data: {}) {\n        this.nokais[nokaiId.toString()] = {...this.nokais[nokaiId.toString()], ...data}\n        Object.keys(this.subscribers).forEach(subscriber => {\n            this.subscribers[subscriber]([nokaiId])\n        })\n    }\n\n    static batch(data: { [key: string]: {} }) {\n        Object.keys(data).forEach(nokaiId => {\n            this.nokais[nokaiId] = {...this.nokais[nokaiId], ...data[nokaiId]}\n        })\n        Object.keys(this.subscribers).forEach(subscriber => {\n            this.subscribers[subscriber](Object.keys(data).map(id => BigInt(id)))\n        })\n    }\n}","import {Component} from \"react\";\nimport {Address, NokaiId} from \"../../../blockchain/definition/types\";\nimport {NokaiContract} from \"../../../blockchain/definition/NokaiContract\";\nimport Nokai from \"../../../game/Nokai\";\nimport HttpUtils from \"../../../utils/HttpUtils\";\nimport {NokaiConfig} from \"./data/NokaiConfig\";\nimport {NfStorage} from \"../../../utils/NftStorage\";\nimport NokaiStats from \"../../../game/NokaiStats\";\nimport {NokaiStore} from \"./store/NokaiStore\";\nimport {NokaiStatsContract} from \"../../../blockchain/definition/NokaiStatsContract\";\n\ntype NokaiInventoryProperties = {\n    nokai: NokaiContract,\n    nokaiStats: NokaiStatsContract,\n    account: Address,\n    onClick: (nokaiId: NokaiId) => void\n}\n\ntype NokaiInventoryState = {\n    nokaisUpdatedAt: number,\n    ownedNokaiIds: NokaiId[],\n    loading: boolean\n}\n\nexport default class NokaiInventory extends Component<NokaiInventoryProperties, NokaiInventoryState> {\n    constructor(props: NokaiInventoryProperties) {\n        super(props)\n        this.state = {\n            nokaisUpdatedAt: Date.now(),\n            ownedNokaiIds: [],\n            loading: true\n        }\n        this.nokaisUpdated = this.nokaisUpdated.bind(this)\n    }\n\n    async componentDidMount() {\n        NokaiStore.subscribe(\"NokaiInventory\", this.nokaisUpdated)\n        await this.loadNokais()\n    }\n\n    async componentDidUpdate(prevProps: Readonly<NokaiInventoryProperties>, prevState: Readonly<NokaiInventoryState>, snapshot?: any) {\n        if (this.props.account !== prevProps.account) {\n            await this.loadNokais()\n        }\n    }\n\n    nokaisUpdated(nokaiIds: NokaiId[]) {\n        console.log(\"NOKAI UPDATED\")\n        this.setState({nokaisUpdatedAt: Date.now()})\n    }\n\n    async loadNokais() {\n        Nokai.listFor(this.props.nokai, this.props.account).then(nokaiIds => {\n\n            NokaiStats.profiles(this.props.nokaiStats, nokaiIds).then(profiles => {\n                const data: { [key: string]: {} } = {}\n                profiles.forEach(profile => {\n                    data[profile.nokaiId.toString()] = {profile: profile}\n                })\n                NokaiStore.batch(data)\n            })\n\n            nokaiIds.forEach(nokaiId => {\n                HttpUtils.get(NfStorage.config + `/${nokaiId}.json`, (result: NokaiConfig) => {\n                    NokaiStore.update(nokaiId, {nokaiId: nokaiId, imageUrl: NfStorage.img + `/${result.image}`, name: result.name})\n                }, null)\n            })\n            this.setState({loading: false, ownedNokaiIds: nokaiIds})\n        })\n    }\n\n    render() {\n        return <div>\n            {!this.state.loading && NokaiStore.list(this.state.ownedNokaiIds).map((nokai, index) => {\n                return <img style={{border: \"1px solid grey\"}} src={nokai.imageUrl} alt=\"nokai\" key={index}/>\n            })\n            }\n        </div>\n    }\n}","import {Component} from \"react\";\nimport GameNavbar from \"./game/GameNavbar\";\nimport GameLoading from \"./game/GameLoading\";\nimport Web3Utils from \"../../blockchain/Web3Utils\";\nimport {Button, Modal} from \"react-bootstrap\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\nimport GameBoard from \"./game/GameBoard\";\nimport ContractLoader from \"../../blockchain/ContractLoader\";\nimport {BlackHoleContract} from \"../../blockchain/definition/BlackHoleContract\";\nimport {NokaiContract} from \"../../blockchain/definition/NokaiContract\";\nimport {NokaiStatsContract} from \"../../blockchain/definition/NokaiStatsContract\";\nimport NokaiInventory from \"./game/NokaiInventory\";\nimport {NokaiId} from \"../../blockchain/definition/types\";\n\ninterface GameViewProperties extends RouteComponentProps {\n}\n\ntype GameViewState = {\n    blackhole: BlackHoleContract | null,\n    nokai: NokaiContract | null,\n    nokaiStats: NokaiStatsContract | null,\n    networkId: bigint | null,\n    account: string | null,\n    walletConnected: boolean,\n    loading: boolean\n}\n\nclass GameView extends Component<GameViewProperties, GameViewState> {\n    constructor(props: GameViewProperties) {\n        super(props)\n        this.state = {\n            blackhole: null,\n            nokai: null,\n            nokaiStats: null,\n            networkId: null,\n            account: null,\n            walletConnected: false,\n            loading: true\n        }\n        this.setupState = this.setupState.bind(this)\n        this.loadBlockchainData = this.loadBlockchainData.bind(this)\n        this.loadContracts = this.loadContracts.bind(this)\n        this.listenNetworkChanges = this.listenNetworkChanges.bind(this)\n        this.listenAccountChanges = this.listenAccountChanges.bind(this)\n        this.loginMetamask = this.loginMetamask.bind(this)\n        this.backToLobby = this.backToLobby.bind(this)\n        this.areContractsValid = this.areContractsValid.bind(this)\n        this.onInventoryNokaiClick = this.onInventoryNokaiClick.bind(this)\n    }\n\n    async componentDidMount() {\n        const walletConnected = await Web3Utils.isMetamaskConnected()\n        if (walletConnected) {\n            await Web3Utils.loadMetamask()\n            await this.setupState()\n        } else {\n            this.setState({loading: false})\n        }\n    }\n\n    async setupState() {\n        console.log(\"load data\")\n        await this.loadBlockchainData()\n        await this.listenNetworkChanges()\n        await this.listenAccountChanges()\n    }\n\n    async loadBlockchainData() {\n        const account = await Web3Utils.getDefaultAccount()\n        const networkId = await Web3Utils.getNetwork()\n\n        console.log(\"load contract\")\n        await this.loadContracts()\n\n        this.setState({account: account, loading: false, networkId: networkId, walletConnected: true})\n    }\n\n    async loadContracts() {\n        const blackhole = await ContractLoader.instantiateBlackHole()\n        const nokai = await ContractLoader.instantiateNokai()\n        const nokaiStats = await ContractLoader.instantiateNokaiStats()\n\n        this.setState({\n            blackhole: blackhole,\n            nokai: nokai,\n            nokaiStats: nokaiStats\n        })\n    }\n\n    async listenNetworkChanges() {\n        console.log(\"##listen network change\")\n        Web3Utils.getEth().on('chainChanged', (chainId: bigint) => {\n            console.log(\"network changed\", chainId)\n            this.setState({networkId: chainId})\n        })\n    }\n\n    async listenAccountChanges() {\n        console.log(\"##listen account change\")\n        Web3Utils.getEth().on('accountsChanged', (accounts: string[]) => {\n            console.log(\"account changed\", accounts[0])\n            if (accounts.length === 0) {\n                this.setState({account: null, walletConnected: false})\n            } else {\n                this.setState({account: accounts[0]})\n            }\n        })\n    }\n\n    async loginMetamask() {\n        let metamaskLoaded = await Web3Utils.loadMetamask()\n        if (metamaskLoaded) {\n            console.log(\"trying load data\")\n            await this.setupState()\n        }\n    }\n\n    backToLobby = () => {\n        this.props.history.push('/')\n    }\n\n    areContractsValid() {\n        return this.state.blackhole != null &&\n            this.state.nokai != null &&\n            this.state.nokaiStats != null\n    }\n\n    onInventoryNokaiClick(nokaiId: NokaiId) {\n\n    }\n\n    render() {\n\n        let content\n\n        if (this.state.loading) {\n            content = <GameLoading/>\n        } else if (!this.state.walletConnected) {\n            content = <div>\n                <Modal show={true} backdrop=\"static\" keyboard={false} aria-labelledby=\"contained-modal-title-vcenter\" centered animation={false}>\n                    <Modal.Header closeButton={false}><Modal.Title>Metamask</Modal.Title></Modal.Header>\n                    <Modal.Body>\n                        A connection to your Metamask wallet is required in order to play in BlackHole. We will use this access to retrieve your NFT and tokens associated to the\n                        linked account.\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={this.backToLobby}>\n                            Quit Game\n                        </Button>\n                        <Button variant=\"primary\" onClick={this.loginMetamask}>Login Metamask</Button>\n                    </Modal.Footer>\n                </Modal>\n            </div>\n        } else if (this.state.networkId != null && this.state.account != null && this.areContractsValid()) {\n            content = <div>\n                <GameNavbar networkId={this.state.networkId} account={this.state.account}/>\n                <div className=\"container-fluid mt-5\">\n                    <div className=\"row\">\n                        <div className=\"col-md-9\">\n                            <GameBoard blackhole={this.state.blackhole!!}/>\n                        </div>\n                        <div className=\"col-md-3\">\n                            <h1>Menu</h1>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-md-12\">\n                            <NokaiInventory nokai={this.state.nokai!!} nokaiStats={this.state.nokaiStats!!} account={this.state.account} onClick={this.onInventoryNokaiClick}/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        } else if (this.state.blackhole == null) {\n            content = <div>\n                <h3>Error: The game is not deployed on your selected network ({this.state.networkId}). Please select a supported network on your Metamask.</h3>\n                <Button variant=\"secondary\" onClick={this.backToLobby}>\n                    Go Back\n                </Button>\n            </div>\n        } else {\n            content = <div>\n                <h3>Error: unexpected error</h3>\n                <Button variant=\"secondary\" onClick={this.backToLobby}>\n                    Quit Game\n                </Button>\n            </div>\n        }\n\n        return <div className=\"container-fluid mt-5\">\n            {content}\n        </div>\n    }\n}\n\nexport default withRouter(GameView);","import {Component} from \"react\";\n\ntype HomeLoadingProperties = {}\n\ntype HomeLoadingState = {}\n\nexport default class HomeLoading extends Component<HomeLoadingProperties, HomeLoadingState> {\n\n    render() {\n        return <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n    }\n}","import {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {Component} from \"react\";\nimport Web3Utils from \"../../../blockchain/Web3Utils\";\n\ntype NavbarProperties = {}\n\ntype NavbarState = {\n    walletConnected: boolean,\n    account: string | null,\n    loading: boolean\n}\n\nexport default class Navbar extends Component<NavbarProperties, NavbarState> {\n    constructor(props: NavbarProperties) {\n        super(props)\n        this.state = {\n            walletConnected: false,\n            account: null,\n            loading: true\n        }\n    }\n\n    async componentDidMount() {\n        const walletConnected = await Web3Utils.isMetamaskConnected()\n        if (walletConnected) {\n            await Web3Utils.loadMetamask()\n            await this.loadData()\n        } else {\n            this.setState({loading: false})\n        }\n    }\n\n    async loadData() {\n        await this.loadAccountsData()\n        await this.listenAccountChanges()\n    }\n\n    async loadAccountsData() {\n        const account = await Web3Utils.getDefaultAccount()\n        this.setState({account: account, loading: false, walletConnected: true})\n    }\n\n    async listenAccountChanges() {\n        console.log(\"##listen account change\")\n        Web3Utils.getEth().on('accountsChanged', (accounts: string[]) => {\n            console.log(\"account changed\", accounts[0])\n            this.setState({account: accounts[0]})\n        })\n    }\n\n    async loginMetamask() {\n        let metamaskLoaded = await Web3Utils.loadMetamask()\n        if (metamaskLoaded) {\n            await this.loadData()\n        }\n    }\n\n    render() {\n        return <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n            <a\n                className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\n                href=\"https://github.com/Draym/blackhole\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n            >\n                <span><FontAwesomeIcon icon={['fab', \"github\"]}/> Game Contracts</span>\n            </a>\n\n            {this.state.walletConnected && this.state.account != null && <span style={{color: 'white'}}>{this.state.account}</span>}\n\n            {!this.state.loading && !this.state.walletConnected && <button onClick={this.loginMetamask}>Connect Metamask</button>}\n        </nav>\n    }\n}","import {Component} from \"react\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\n\ninterface TutorialViewProperties extends RouteComponentProps {\n}\n\ntype TutorialViewState = {\n    loading: boolean\n}\n\nclass TutorialView extends Component<TutorialViewProperties, TutorialViewState> {\n    constructor(props: TutorialViewProperties) {\n        super(props)\n        this.state = {\n            loading: true\n        }\n        this.backToLobby = this.backToLobby.bind(this);\n    }\n\n    backToLobby = () => {\n        this.props.history.push('/')\n    }\n\n    render() {\n        return <div>\n        </div>\n    }\n}\nexport default withRouter(TutorialView);","import {Component} from \"react\";\nimport HomeLoading from \"./home/HomeLoading\";\nimport {Route, RouteComponentProps, Switch, withRouter} from \"react-router-dom\";\nimport Navbar from \"./home/Navbar\";\nimport TutorialView from \"./home/TutorialView\";\nimport {Button} from \"react-bootstrap\";\n\ninterface HomeViewProperties extends RouteComponentProps {\n}\n\ntype HomeViewState = {\n    loading: boolean\n}\n\nclass HomeView extends Component<HomeViewProperties, HomeViewState> {\n    constructor(props: HomeViewProperties) {\n        super(props)\n        this.state = {\n            loading: true\n        }\n        this.launchGame = this.launchGame.bind(this)\n    }\n\n    componentDidMount() {\n        this.setState({loading: false})\n    }\n\n    launchGame = () => {\n        this.props.history.push('/play')\n    }\n\n    render() {\n        let current = <div>\n            <h2>Hello world!</h2>\n            <Button variant=\"primary\" onClick={this.launchGame}>\n                Launch Game\n            </Button>\n        </div>\n\n        if (this.state.loading) {\n            return <HomeLoading/>\n        } else {\n            return <div>\n                <Navbar/>\n                <div className=\"container-fluid mt-5\">\n                    <Switch>\n                        <Route path={\"/tutorial\"}>\n                            <TutorialView/>\n                        </Route>\n                        <Route path={\"/\"}>\n                            {current}\n                        </Route>\n                    </Switch>\n                </div>\n            </div>\n        }\n    }\n}\n\nexport default withRouter(HomeView);","import {Component} from \"react\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\n\ninterface MarketViewProperties extends RouteComponentProps {\n}\n\ntype MarketViewState = {\n    loading: boolean\n}\n\nclass MarketView extends Component<MarketViewProperties, MarketViewState> {\n    constructor(props: MarketViewProperties) {\n        super(props)\n        this.state = {\n            loading: true\n        }\n        this.backToLobby = this.backToLobby.bind(this);\n    }\n\n    backToLobby = () => {\n        this.props.history.push('/')\n    }\n\n    render() {\n        return <div>\n        </div>\n    }\n}\nexport default withRouter(MarketView);","import './App.scss';\nimport {Component} from \"react\";\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport GameView from \"./web/views/GameView\";\nimport HomeView from \"./web/views/HomeView\";\nimport MarketView from \"./web/views/MarketView\";\n\nimport {library} from '@fortawesome/fontawesome-svg-core'\nimport {faGithub, faLinkedinIn} from '@fortawesome/free-brands-svg-icons';\n\nlibrary.add(faGithub, faLinkedinIn);\n\nconst routerBaseName = process.env.PUBLIC_URL;\n\ninterface AppProperties {\n}\n\ninterface AppState {\n}\n\nexport default class App extends Component<AppProperties, AppState> {\n\n    render() {\n        return <div className=\"App\">\n            <main role=\"main\">\n                <BrowserRouter basename={routerBaseName}>\n                    <Switch>\n                        <Route path={\"/play\"}>\n                            <GameView/>\n                        </Route>\n                        <Route path={\"/market\"}>\n                            <MarketView/>\n                        </Route>\n                        <Route path={\"/\"}>\n                            <HomeView/>\n                        </Route>\n                    </Switch>\n                </BrowserRouter>\n            </main>\n        </div>\n    }\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}