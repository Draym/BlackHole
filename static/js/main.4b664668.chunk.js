(this.webpackJsonpblackhole=this.webpackJsonpblackhole||[]).push([[0],{243:function(t,e,n){},244:function(t,e,n){},263:function(t,e){},265:function(t,e){},269:function(t,e){},270:function(t,e){},297:function(t,e){},299:function(t,e){},310:function(t,e){},312:function(t,e){},322:function(t,e){},324:function(t,e){},339:function(t,e){},373:function(t,e){},374:function(t,e){},444:function(t,e){},446:function(t,e){},451:function(t,e){},453:function(t,e){},460:function(t,e){},472:function(t,e){},475:function(t,e){},480:function(t,e){},560:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(46),o=n.n(r),s=(n(243),n(4)),i=n(6),u=n(10),l=n(9),d=(n(244),n(68)),h=n(18),b=n(11),f=n.n(b),j=n(19),p=n(25),k=n(94),O=n(3),v=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={networkId:t.networkId,account:t.account,loading:!0},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({loading:!1});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow",children:[Object(O.jsx)("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"https://github.com/Draym/blackhole",target:"_blank",rel:"noopener noreferrer",children:Object(O.jsxs)("span",{children:[Object(O.jsx)(k.a,{icon:["fab","github"]})," BlackHole Game"]})}),Object(O.jsxs)("span",{style:{color:"white"},children:["network: ",this.state.networkId]}),Object(O.jsxs)("span",{className:"me-3",style:{color:"white"},children:["account: ",this.state.account]})]})}}]),n}(a.Component),m=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"animated fadeIn pt-1 text-center",children:"Loading..."})}}]),n}(a.Component),x=n(229),w=n.n(x),y=n(131),g=n.n(y),C=function(){function t(){Object(s.a)(this,t)}return Object(i.a)(t,null,[{key:"loadMetamask",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.ethereum){t.next=10;break}return t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return e=t.sent,window.web3=new w.a(window.ethereum),window.ethereum.defaultAccount=e[0],window.ethereum.on("accountsChanged",(function(t){window.ethereum.defaultAccount=t[0]})),t.abrupt("return",!0);case 10:return window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!"),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"isMetamaskInstalled",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()();case 2:return e=t.sent,t.abrupt("return",!!e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"isMetamaskConnected",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()();case 2:if(!t.sent){t.next=11;break}return console.log("Metamask successfully detected!"),t.next=7,window.ethereum.request({method:"eth_accounts"});case 7:return e=t.sent,t.abrupt("return",e.length>0);case 11:return console.log("Metamask is not installed!"),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getEth",value:function(){return window.ethereum}},{key:"getNetwork",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.web3.eth.net.getId());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getAccounts",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_accounts"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getDefaultAccount",value:function(){try{return window.ethereum.defaultAccount}catch(t){return null}}},{key:"encode",value:function(t){return window.web3.utils.fromAscii(t)}},{key:"nullAddress",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"nullBytes",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000"}}]),t}(),M=n(565),A=n(566),D=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).backToLobby=function(){a.props.history.push("/")},a.state={networkId:null,account:null,walletConnected:!1,loading:!0},a.loadData=a.loadData.bind(Object(p.a)(a)),a.loadAccountsData=a.loadAccountsData.bind(Object(p.a)(a)),a.listenNetworkChanges=a.listenNetworkChanges.bind(Object(p.a)(a)),a.listenAccountChanges=a.listenAccountChanges.bind(Object(p.a)(a)),a.loginMetamask=a.loginMetamask.bind(Object(p.a)(a)),a.backToLobby=a.backToLobby.bind(Object(p.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.isMetamaskConnected();case 2:if(!t.sent){t.next=10;break}return t.next=6,C.loadMetamask();case 6:return t.next=8,this.loadData();case 8:t.next=11;break;case 10:this.setState({loading:!1});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("load data"),t.next=3,this.loadAccountsData();case 3:return t.next=5,this.listenNetworkChanges();case 5:return t.next=7,this.listenAccountChanges();case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadAccountsData",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getDefaultAccount();case 2:return e=t.sent,t.next=5,C.getNetwork();case 5:n=t.sent,this.setState({account:e,loading:!1,networkId:n,walletConnected:!0});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"listenNetworkChanges",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e=this;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("##listen network change"),C.getEth().on("chainChanged",(function(t){console.log("network changed",t),e.setState({networkId:t})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"listenAccountChanges",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e=this;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("##listen account change"),C.getEth().on("accountsChanged",(function(t){console.log("account changed",t[0]),0===t.length?e.setState({account:null,walletConnected:!1}):e.setState({account:t[0]})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"loginMetamask",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.loadMetamask();case 2:if(!t.sent){t.next=7;break}return console.log("trying load data"),t.next=7,this.loadData();case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?Object(O.jsx)(m,{}):this.state.walletConnected?null!=this.state.networkId&&null!=this.state.account?Object(O.jsxs)("div",{children:[Object(O.jsx)(v,{networkId:this.state.networkId,account:this.state.account}),Object(O.jsx)("div",{className:"container-fluid mt-5",children:Object(O.jsx)("span",{children:"hello game"})})]}):Object(O.jsxs)("div",{children:["Error: Go back to home",Object(O.jsx)(A.a,{variant:"secondary",onClick:this.backToLobby,children:"Quit Game"})]}):Object(O.jsx)("div",{children:Object(O.jsxs)(M.a,{show:!0,backdrop:"static",keyboard:!1,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,animation:!1,children:[Object(O.jsx)(M.a.Header,{closeButton:!1,children:Object(O.jsx)(M.a.Title,{children:"Metamask"})}),Object(O.jsx)(M.a.Body,{children:"A connection to your Metamask wallet is required in order to play in BlackHole. We will use this access to retrieve your NFT and tokens associated to the linked account."}),Object(O.jsxs)(M.a.Footer,{children:[Object(O.jsx)(A.a,{variant:"secondary",onClick:this.backToLobby,children:"Quit Game"}),Object(O.jsx)(A.a,{variant:"primary",onClick:this.loginMetamask,children:"Login Metamask"})]})]})})}}]),n}(a.Component),N=Object(h.f)(D),L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"animated fadeIn pt-1 text-center",children:"Loading..."})}}]),n}(a.Component),I=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={walletConnected:!1,account:null,loading:!0},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.isMetamaskConnected();case 2:if(!t.sent){t.next=10;break}return t.next=6,C.loadMetamask();case 6:return t.next=8,this.loadData();case 8:t.next=11;break;case 10:this.setState({loading:!1});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadAccountsData();case 2:return t.next=4,this.listenAccountChanges();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadAccountsData",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getDefaultAccount();case 2:e=t.sent,this.setState({account:e,loading:!1,walletConnected:!0});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"listenAccountChanges",value:function(){var t=Object(j.a)(f.a.mark((function t(){var e=this;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("##listen account change"),C.getEth().on("accountsChanged",(function(t){console.log("account changed",t[0]),e.setState({account:t[0]})}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"loginMetamask",value:function(){var t=Object(j.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.loadMetamask();case 2:if(!t.sent){t.next=6;break}return t.next=6,this.loadData();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsxs)("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow",children:[Object(O.jsx)("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"https://github.com/Draym/blackhole",target:"_blank",rel:"noopener noreferrer",children:Object(O.jsxs)("span",{children:[Object(O.jsx)(k.a,{icon:["fab","github"]})," Game Contracts"]})}),this.state.walletConnected&&null!=this.state.account&&Object(O.jsx)("span",{style:{color:"white"},children:this.state.account}),!this.state.loading&&!this.state.walletConnected&&Object(O.jsx)("button",{onClick:this.loginMetamask,children:"Connect Metamask"})]})}}]),n}(a.Component),T=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).backToLobby=function(){a.props.history.push("/")},a.state={loading:!0},a.backToLobby=a.backToLobby.bind(Object(p.a)(a)),a}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{})}}]),n}(a.Component),S=Object(h.f)(T),G=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).launchGame=function(){a.props.history.push("/play")},a.state={loading:!0},a.launchGame=a.launchGame.bind(Object(p.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){var t=Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Hello world!"}),Object(O.jsx)(A.a,{variant:"primary",onClick:this.launchGame,children:"Launch Game"})]});return this.state.loading?Object(O.jsx)(L,{}):Object(O.jsxs)("div",{children:[Object(O.jsx)(I,{}),Object(O.jsx)("div",{className:"container-fluid mt-5",children:Object(O.jsxs)(h.c,{children:[Object(O.jsx)(h.a,{path:"/tutorial",children:Object(O.jsx)(S,{})}),Object(O.jsx)(h.a,{path:"/",children:t})]})})]})}}]),n}(a.Component),B=Object(h.f)(G),E=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).backToLobby=function(){a.props.history.push("/")},a.state={loading:!0},a.backToLobby=a.backToLobby.bind(Object(p.a)(a)),a}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{})}}]),n}(a.Component),F=Object(h.f)(E),q=n(55),_=n(133);q.b.add(_.a,_.b);var H=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("main",{role:"main",children:Object(O.jsx)(d.a,{basename:"/blackhole",children:Object(O.jsxs)(h.c,{children:[Object(O.jsx)(h.a,{path:"/play",children:Object(O.jsx)(N,{})}),Object(O.jsx)(h.a,{path:"/market",children:Object(O.jsx)(F,{})}),Object(O.jsx)(h.a,{path:"/",children:Object(O.jsx)(B,{})})]})})})})}}]),n}(a.Component),J=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,567)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(H,{})}),document.getElementById("root")),J()}},[[560,1,2]]]);
//# sourceMappingURL=main.4b664668.chunk.js.map